.. _zigbee_memory:

Zigbee memory requirements
##########################

.. contents::
   :local:
   :depth: 2

This page provides information about the amount of flash memory and RAM that is required by :ref:`zigbee_samples`, as well as stack memory requirements for ``main`` and ``zboss`` threads.
Use it to check if your application has enough space for a given configuration.
Values are provided for :ref:`development and production libraries<nrfxlib:zboss>`.

Samples were built using the available :ref:`nrfxlib:zboss`.
Unless stated otherwise, the default :file:`prj.conf` was used.

.. _zigbee_memory_52840:
.. _zigbee_memory_52833:
.. _zigbee_memory_5340:

RAM and flash memory requirements
*********************************

RAM and flash memory requirement values differ depending on the DK, the programmed sample, and the ZBOSS stack version.

ZBOSS stack production version
==============================

The following tables list memory requirement values (in KB) for Zigbee samples for the :ref:`production version<nrfxlib:zboss>` of the ZBOSS Zigbee stack.

|not_available_note|

.. tabs::

   .. tab:: nRF52840

      The following table lists memory requirements for samples running on the :ref:`nRF52840 DK <gs_programming_board_names>` (:ref:`nrf52840dk_nrf52840 <zephyr:nrf52840dk_nrf52840>`).

      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+
      | Sample                                                                                                                 | ROM, ZBOSS stack + App   | ROM, MCUboot bootloader   | ROM, ZBOSS non-volatile memory   | ROM, ZBOSS product config   | Total ROM   | RAM, ZBOSS stack + App   | Total RAM   |
      +========================================================================================================================+==========================+===========================+==================================+=============================+=============+==========================+=============+
      | :ref:`Network coordinator <zigbee_network_coordinator_sample>`                                                         | 289                      | 0                         | 32                               | 4                           | 325         | 62                       | 62          |
      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+
      | :ref:`Light bulb <zigbee_light_bulb_sample>`                                                                           | 308                      | 0                         | 32                               | 4                           | 344         | 48                       | 48          |
      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+
      | :ref:`Light switch <zigbee_light_switch_sample>`                                                                       | 243                      | 0                         | 32                               | 4                           | 279         | 42                       | 42          |
      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+
      | :ref:`Light switch <zigbee_light_switch_sample>` with :ref:`lib_zigbee_fota`                                           | 255                      | 48                        | 32                               | 4                           | 339         | 44                       | 44          |
      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+
      | :ref:`Light switch <zigbee_light_switch_sample>` with :ref:`zigbee_light_switch_sample_nus`                            | 341                      | 0                         | 32                               | 4                           | 377         | 57                       | 57          |
      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+
      | :ref:`Light switch <zigbee_light_switch_sample>` with :ref:`zigbee_light_switch_sample_nus` and :ref:`lib_zigbee_fota` | 353                      | 48                        | 32                               | 4                           | 437         | 60                       | 60          |
      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+

   .. tab:: nRF52833

      The following table lists memory requirements for samples running on the :ref:`nRF52833 DK <gs_programming_board_names>` (:ref:`nrf52833dk_nrf52833 <zephyr:nrf52833dk_nrf52833>`).

      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+
      | Sample                                                                                                                 | ROM, ZBOSS stack + App   | ROM, MCUboot bootloader   | ROM, ZBOSS non-volatile memory   | ROM, ZBOSS product config   | Total ROM   | RAM, ZBOSS stack + App   | Total RAM   |
      +========================================================================================================================+==========================+===========================+==================================+=============================+=============+==========================+=============+
      | :ref:`Network coordinator <zigbee_network_coordinator_sample>`                                                         | 287                      | 0                         | 16                               | 4                           | 307         | 60                       | 60          |
      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+
      | :ref:`Light bulb <zigbee_light_bulb_sample>`                                                                           | 306                      | 0                         | 16                               | 4                           | 326         | 47                       | 47          |
      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+
      | :ref:`Light switch <zigbee_light_switch_sample>`                                                                       | 241                      | 0                         | 16                               | 4                           | 261         | 41                       | 41          |
      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+
      | :ref:`Light switch <zigbee_light_switch_sample>` with :ref:`lib_zigbee_fota`                                           | n/a                      | n/a                       | n/a                              | n/a                         | n/a         | n/a                      | n/a         |
      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+
      | :ref:`Light switch <zigbee_light_switch_sample>` with :ref:`zigbee_light_switch_sample_nus`                            | 338                      | 0                         | 16                               | 4                           | 358         | 56                       | 56          |
      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+
      | :ref:`Light switch <zigbee_light_switch_sample>` with :ref:`zigbee_light_switch_sample_nus` and :ref:`lib_zigbee_fota` | n/a                      | n/a                       | n/a                              | n/a                         | n/a         | n/a                      | n/a         |
      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+

..

ZBOSS stack development version
===============================

The following tables list memory requirement values (in KB) for Zigbee samples running for the :ref:`development version<nrfxlib:zboss>` of the ZBOSS Zigbee stack.

|not_available_note|

.. tabs::

   .. tab:: nRF52840

      The following table lists memory requirements for samples running on the :ref:`nRF52840 DK <gs_programming_board_names>` (:ref:`nrf52840dk_nrf52840 <zephyr:nrf52840dk_nrf52840>`).

      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+
      | Sample                                                                                                                 | ROM, ZBOSS stack + App   | ROM, MCUboot bootloader   | ROM, ZBOSS non-volatile memory   | ROM, ZBOSS product config   | Total ROM   | RAM, ZBOSS stack + App   | Total RAM   |
      +========================================================================================================================+==========================+===========================+==================================+=============================+=============+==========================+=============+
      | :ref:`Network coordinator <zigbee_network_coordinator_sample>`                                                         | 299                      | 0                         | 32                               | 4                           | 335         | 63                       | 63          |
      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+
      | :ref:`Light bulb <zigbee_light_bulb_sample>`                                                                           | 317                      | 0                         | 32                               | 4                           | 353         | 49                       | 49          |
      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+
      | :ref:`Light switch <zigbee_light_switch_sample>`                                                                       | 250                      | 0                         | 32                               | 4                           | 286         | 43                       | 43          |
      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+
      | :ref:`Light switch <zigbee_light_switch_sample>` with :ref:`lib_zigbee_fota`                                           | 263                      | 48                        | 32                               | 4                           | 347         | 45                       | 45          |
      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+
      | :ref:`Light switch <zigbee_light_switch_sample>` with :ref:`zigbee_light_switch_sample_nus`                            | 348                      | 0                         | 32                               | 4                           | 384         | 58                       | 58          |
      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+
      | :ref:`Light switch <zigbee_light_switch_sample>` with :ref:`zigbee_light_switch_sample_nus` and :ref:`lib_zigbee_fota` | 360                      | 48                        | 32                               | 4                           | 444         | 60                       | 60          |
      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+
      | :ref:`NCP <zigbee_ncp_sample>`                                                                                         | 320                      | 0                         | 32                               | 4                           | 356         | 75                       | 75          |
      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+
      | :ref:`NCP with USB transport <zigbee_ncp_sample>`                                                                      | 339                      | 64                        | 32                               | 4                           | 439         | 84                       | 84          |
      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+

   .. tab:: nRF52833

      The following table lists memory requirements for samples running on the :ref:`nRF52833 DK <gs_programming_board_names>` (:ref:`nrf52833dk_nrf52833 <zephyr:nrf52833dk_nrf52833>`).

      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+
      | Sample                                                                                                                 | ROM, ZBOSS stack + App   | ROM, MCUboot bootloader   | ROM, ZBOSS non-volatile memory   | ROM, ZBOSS product config   | Total ROM   | RAM, ZBOSS stack + App   | Total RAM   |
      +========================================================================================================================+==========================+===========================+==================================+=============================+=============+==========================+=============+
      | :ref:`Network coordinator <zigbee_network_coordinator_sample>`                                                         | 296                      | 0                         | 16                               | 4                           | 316         | 61                       | 61          |
      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+
      | :ref:`Light bulb <zigbee_light_bulb_sample>`                                                                           | 315                      | 0                         | 16                               | 4                           | 335         | 47                       | 47          |
      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+
      | :ref:`Light switch <zigbee_light_switch_sample>`                                                                       | 248                      | 0                         | 16                               | 4                           | 268         | 41                       | 41          |
      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+
      | :ref:`Light switch <zigbee_light_switch_sample>` with :ref:`lib_zigbee_fota`                                           | n/a                      | n/a                       | n/a                              | n/a                         | n/a         | n/a                      | n/a         |
      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+
      | :ref:`Light switch <zigbee_light_switch_sample>` with :ref:`zigbee_light_switch_sample_nus`                            | 346                      | 0                         | 16                               | 4                           | 366         | 56                       | 56          |
      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+
      | :ref:`Light switch <zigbee_light_switch_sample>` with :ref:`zigbee_light_switch_sample_nus` and :ref:`lib_zigbee_fota` | n/a                      | n/a                       | n/a                              | n/a                         | n/a         | n/a                      | n/a         |
      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+
      | :ref:`NCP <zigbee_ncp_sample>`                                                                                         | 318                      | 0                         | 16                               | 4                           | 338         | 73                       | 73          |
      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+
      | :ref:`NCP with USB transport <zigbee_ncp_sample>`                                                                      | 337                      | 64                        | 16                               | 4                           | 421         | 82                       | 82          |
      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+

   .. tab:: nRF5340

      The following table lists memory requirements for samples running on the :ref:`nRF5340 DK <gs_programming_board_names>` (:ref:`nrf5340dk_nrf5340_cpuapp <zephyr:nrf5340dk_nrf5340>`).

      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+
      | Sample                                                                                                                 | ROM, ZBOSS stack + App   | ROM, MCUboot bootloader   | ROM, ZBOSS non-volatile memory   | ROM, ZBOSS product config   | Total ROM   | RAM, ZBOSS stack + App   | Total RAM   |
      +========================================================================================================================+==========================+===========================+==================================+=============================+=============+==========================+=============+
      | :ref:`Network coordinator <zigbee_network_coordinator_sample>`                                                         | 271                      | 0                         | 32                               | 4                           | 307         | 68                       | 68          |
      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+
      | :ref:`Light bulb <zigbee_light_bulb_sample>`                                                                           | 290                      | 0                         | 32                               | 4                           | 326         | 54                       | 54          |
      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+
      | :ref:`Light switch <zigbee_light_switch_sample>`                                                                       | 223                      | 0                         | 32                               | 4                           | 259         | 48                       | 48          |
      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+
      | :ref:`Light switch <zigbee_light_switch_sample>` with :ref:`lib_zigbee_fota`                                           | n/a                      | n/a                       | n/a                              | n/a                         | n/a         | n/a                      | n/a         |
      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+
      | :ref:`Light switch <zigbee_light_switch_sample>` with :ref:`zigbee_light_switch_sample_nus`                            | 270                      | 0                         | 32                               | 4                           | 306         | 57                       | 57          |
      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+
      | :ref:`Light switch <zigbee_light_switch_sample>` with :ref:`zigbee_light_switch_sample_nus` and :ref:`lib_zigbee_fota` | n/a                      | n/a                       | n/a                              | n/a                         | n/a         | n/a                      | n/a         |
      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+
      | :ref:`NCP <zigbee_ncp_sample>`                                                                                         | n/a                      | n/a                       | n/a                              | n/a                         | n/a         | n/a                      | n/a         |
      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+
      | :ref:`NCP with USB transport <zigbee_ncp_sample>`                                                                      | n/a                      | n/a                       | n/a                              | n/a                         | n/a         | n/a                      | n/a         |
      +------------------------------------------------------------------------------------------------------------------------+--------------------------+---------------------------+----------------------------------+-----------------------------+-------------+--------------------------+-------------+

..

Stack memory requirements
*************************

The following table lists stack memory requirement values (in KB) for ``main`` and ``zboss`` threads.
These measurements were carried out with :ref:`zephyr:thread_analyzer`, using the following Kconfig options for configuration:

* For the stack memory size of the ``main`` thread - :option:`CONFIG_MAIN_STACK_SIZE`
* For the stack memory size of the ``zboss`` thread - :option:`CONFIG_ZBOSS_DEFAULT_THREAD_STACK_SIZE`

+----------------------------------------------------------------+-----------------------------+----------------------------+------------------------------+-----------------------------+
| Sample                                                         | ``main`` thread stack usage | ``main`` thread stack size | ``zboss`` thread stack usage | ``zboss`` thread stack size |
+================================================================+=============================+============================+==============================+=============================+
| :ref:`Network coordinator <zigbee_network_coordinator_sample>` | 432                         | 1024                       | 1136                         | 2048                        |
+----------------------------------------------------------------+-----------------------------+----------------------------+------------------------------+-----------------------------+
| :ref:`Light bulb <zigbee_light_bulb_sample>`                   | 432                         | 1024                       | 1136                         | 2048                        |
+----------------------------------------------------------------+-----------------------------+----------------------------+------------------------------+-----------------------------+
| :ref:`Light switch <zigbee_light_switch_sample>`               | 424                         | 1024                       | 1136                         | 2048                        |
+----------------------------------------------------------------+-----------------------------+----------------------------+------------------------------+-----------------------------+

.. |not_available_note| replace:: ``n/a`` indicates that the sample with the given variant is not supported on the DK.
